(this["webpackJsonpit-kamasutra-react"]=this["webpackJsonpit-kamasutra-react"]||[]).push([[0],{123:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(23),i=n(5),s="ADD-MESSAGE",a={chatsData:[{id:1,name:"Nuriddin Tashpulatov"},{id:2,name:"Asliddin Tashpulatov"},{id:3,name:"Egor Kreed"},{id:4,name:"Ladinskiy Semyon"},{id:5,name:"Gulnora Oripova"},{id:6,name:"Real Estate"},{id:7,name:"Kim Juhee"},{id:8,name:"Cristiano Ronaldo"}],messagesData:[{id:1,message:"Hi"},{id:2,message:"Wsup"},{id:3,message:"React is the Best"},{id:4,message:"Slaves"},{id:5,message:"kuka"}]},c=function(t){return{type:s,newMessageBody:t}};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case s:var n=e.newMessageBody;return n?Object(i.a)(Object(i.a)({},t),{},{messagesData:[].concat(Object(r.a)(t.messagesData),[{id:6,message:n}])}):t;default:return t}return t}},124:function(t,e,n){"use strict";n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return v})),n.d(e,"b",(function(){return x}));var r=n(23),i=n(5),s=n(14),a="TOGGLE-FOLLOW",c="SET-USERS",o="SET-USERS-PAGE",u="SET-TOTAL-COUNT",l="TOGGLE-IS-FETCHING",d="FOLLOWING-IN-PROGRESS",j={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},f=function(t){return{type:a,userID:t}},g=function(t){return{type:c,users:t}},b=function(t){return{type:o,currentPage:t}},h=function(t){return{type:u,totalCount:t}},p=function(t){return{type:l,isFetching:t}},O=function(t,e){return{type:d,isFetching:t,userId:e}},m=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return function(r){r(p(!0)),r(b(n)),s.d.getFindUsers(t,e).then((function(t){r(p(!1)),r(g(t.items)),r(h(t.totalCount))}))}},v=function(t){return function(e){e(O(!0,t)),s.d.deleteToggleFollow(t).then((function(n){0===n.resultCode&&e(f(t)),e(O(!1,t))}))}},x=function(t){return function(e){e(O(!0,t)),s.d.postToggleFollow(t).then((function(n){0===n.resultCode&&e(f(t)),e(O(!1,t))}))}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a:return Object(i.a)(Object(i.a)({},t),{},{users:t.users.map((function(t){return t.id===e.userID?Object(i.a)(Object(i.a)({},t),{},{followed:!t.followed}):t}))});case c:return Object(i.a)(Object(i.a)({},t),{},{users:e.users});case o:return Object(i.a)(Object(i.a)({},t),{},{currentPage:e.currentPage});case u:return Object(i.a)(Object(i.a)({},t),{},{totalUsersCount:e.totalCount});case l:return Object(i.a)(Object(i.a)({},t),{},{isFetching:e.isFetching});case d:return Object(i.a)(Object(i.a)({},t),{},{followingInProgress:e.isFetching?[].concat(Object(r.a)(t.followingInProgress),[e.userId]):t.followingInProgress.filter((function(t){return t!==e.userId}))});default:return t}}},130:function(t,e,n){t.exports={music:"Music_music__1_uHp"}},131:function(t,e,n){t.exports={news:"News_news__3dNP8"}},134:function(t,e,n){t.exports={preloader:"Preloader_preloader__1uBoH"}},14:function(t,e,n){"use strict";n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return o}));var r=n(89),i=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"3933e929-6970-4ee7-b1ef-3f09d928dcd8"}}),s={getFindUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return i.get("users?page=".concat(t,"&count=").concat(e)).then((function(t){return t.data}))},postToggleFollow:function(t){return i.post("follow/".concat(t)).then((function(t){return t.data}))},deleteToggleFollow:function(t){return i.delete("follow/".concat(t)).then((function(t){return t.data}))}},a={getAuthUser:function(){return i.get("auth/me").then((function(t){return t.data}))},login:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i.post("auth/login",{email:t,password:e,rememberMe:n})},logout:function(){return i.delete("auth/login")}},c={getProfilePage:function(t){return i.get("profile/"+t).then((function(t){return t.data}))},getUserStatus:function(t){return i.get("profile/status/"+t)},updateStatus:function(t){return i.put("profile/status/",{status:t})}},o={uploadProfileAvatar:function(t){return r.put("https://social-network.samuraijs.com/api/1.0/profile/photo",t,{withCredentials:!0,headers:{"API-KEY":"3933e929-6970-4ee7-b1ef-3f09d928dcd8","Content-Type":"multipart/form-data"}})}}},165:function(t,e,n){},166:function(t,e,n){},28:function(t,e,n){t.exports={settings:"Settings_settings__1UmZ3",settingsNav:"Settings_settingsNav__mpcM7",profileSettings:"Settings_profileSettings__2rPwM",downloadLogo:"Settings_downloadLogo__3azQt"}},29:function(t,e,n){t.exports={nav:"Nav_nav__3BkGP",ul__list:"Nav_ul__list__3iaYa",active:"Nav_active__wZHZK",navFriends:"Nav_navFriends__2i7I4",navFriendsText:"Nav_navFriendsText__3fexg",navFriendsImg:"Nav_navFriendsImg__1Ylni"}},291:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),s=n(61),a=n.n(s),c=(n(165),n(48)),o=n(49),u=n(51),l=n(50),d=(n(166),n(29)),j=n.n(d),f=n(19),g=n(1),b=function(t){var e=t.navState.navItemData.map((function(t){return Object(g.jsx)("li",{children:Object(g.jsx)(f.b,{to:t.link,activeClassName:j.a.active,children:t.innerHTML})})})),n=t.navState.navFriendsData.map((function(t){return Object(g.jsx)("img",{id:t.id,src:t.src,className:j.a.navFriendsImg})}));return Object(r.useEffect)((function(){return t.showSettingsIfLogged(t.isAuth)})),Object(g.jsx)("nav",{className:j.a.nav,children:Object(g.jsxs)("ul",{className:j.a.ul__list,children:[e,Object(g.jsxs)("div",{className:j.a.navFriends,children:[Object(g.jsx)(f.b,{to:"/friends",activeClassName:j.a.active,className:j.a.navFriendsText,children:"Friends"}),n]})]})})},h=n(9),p=n(130),O=n.n(p),m=function(){return Object(g.jsx)("div",{className:O.a.music,children:"music"})},v=n(131),x=n.n(v),_=function(){return Object(g.jsx)("div",{className:x.a.news,children:"News"})},w=n(28),S=n.n(w),T=n(88),k=n.n(T),y=n(132),I=n(127),A=n(14),N=function(t){var e=Object(r.useState)(null),n=Object(I.a)(e,2),i=n[0],s=n[1],a=function(){var t=Object(y.a)(k.a.mark((function t(){var e,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=document.querySelector("#image")).files||!e.files[0]){t.next=8;break}return(n=new FormData).append("image",e.files[0]),t.next=6,A.c.uploadProfileAvatar(n);case 6:0===t.sent.data.resultCode?alert("Image downloaded successfully!"):alert("There was a problem with an image");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:S.a.profileSettings,children:[Object(g.jsx)("div",{children:" Profile Settings"}),i?Object(g.jsx)("img",{src:i,alt:"avatar"}):Object(g.jsx)("img",{className:S.a.downloadLogo,src:"https://tinyurl.com/jwkumbpc",alt:"zaglushka"}),Object(g.jsx)("input",{type:"file",name:"changeAvatar",id:"image",onChange:function(t){if(t.target.files&&t.target.files[0]){var e=URL.createObjectURL(t.target.files[0]);s(e)}}}),Object(g.jsx)("button",{onClick:function(){return a()},children:"Set Image"})]})},P=function(t){var e=t.settingsPages.map((function(t){return Object(g.jsx)("li",{children:Object(g.jsx)(f.b,{to:"/settings".concat(t.link),activeClassName:S.a.active,children:t.innerHTML})})}));return Object(g.jsx)("div",{className:S.a.settingsNav,children:e})},L=n(12),F=function(t){return Object(g.jsx)("div",{children:"MessagesSettings"})},C=function(t){return Object(g.jsx)("div",{children:"FindUsersSettings"})},D=function(t){return Object(g.jsx)("div",{children:"NewsSettings"})},M=function(t){return Object(g.jsx)("div",{children:"MusicSettings"})},E=Object(L.b)((function(t){return{settingsPages:t.settingsPage.settingsPages}}),void 0)((function(t){return Object(g.jsxs)("div",{className:S.a.settings,children:["SETTINGS",Object(g.jsx)(P,{settingsPages:t.settingsPages}),Object(g.jsx)(h.b,{path:"/settings/profile_settings",render:function(){return Object(g.jsx)(N,{})}}),Object(g.jsx)(h.b,{path:"/settings/messages_settings",render:function(){return Object(g.jsx)(F,{})}}),Object(g.jsx)(h.b,{path:"/settings/find_users_settings",render:function(){return Object(g.jsx)(C,{})}}),Object(g.jsx)(h.b,{path:"/settings/news_settings",render:function(){return Object(g.jsx)(D,{})}}),Object(g.jsx)(h.b,{path:"/settings/music_settings",render:function(){return Object(g.jsx)(M,{})}})]})})),U=n(5),H=n(66),R=n.n(H),G=n.p+"static/media/aave-aave-logo.0a64aa49.svg",z=function(t){return Object(g.jsxs)("header",{className:R.a.header,children:[Object(g.jsx)("img",{className:R.a.logo__image,src:G}),Object(g.jsx)("div",{className:R.a.loginBlock,children:t.isAuth?Object(g.jsxs)("div",{children:[t.login," - ",Object(g.jsx)("button",{onClick:t.logout,children:"Log out"})]}):Object(g.jsx)(f.b,{to:"/login",children:"Login"})})]})},B=n(52),W="SET-USER-DATA",Z={userId:null,email:null,login:null,isAuth:!1},J=function(t,e,n,r){return{type:W,data:{userId:t,email:e,login:n,isAuth:r}}},K=function(){return function(t){return A.a.getAuthUser().then((function(e){if(0===e.resultCode){var n=e.data,r=n.id,i=n.email,s=n.login;t(J(r,i,s,!0))}}))}},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case W:return Object(U.a)(Object(U.a)({},t),e.data);default:return t}return t},Q=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(g.jsx)(z,Object(U.a)({},this.props))}}]),n}(i.a.Component),q=Object(L.b)((function(t){return{isAuth:t.Auth.isAuth,login:t.Auth.login}}),{logout:function(){return function(t){A.a.logout().then((function(e){0===e.data.resultCode&&t(J(null,null,null,!1))}))}}})(Q),X=n(125),V=n(126),$=n(71),tt=n(62),et=n(33),nt=n.n(et),rt=Object(V.a)({form:"login"})((function(t){return Object(g.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(g.jsx)("div",{children:Object(g.jsx)(X.a,{component:tt.a,validate:[$.b],name:"email",type:"text",placeholder:"E-mail"})}),Object(g.jsx)("div",{children:Object(g.jsx)(X.a,{component:tt.a,validate:[$.b],name:"password",type:"password",placeholder:"Password"})}),Object(g.jsxs)("div",{children:[Object(g.jsx)(X.a,{component:tt.a,name:"rememberMe",type:"checkbox"})," Remember me"]}),t.error&&Object(g.jsx)("div",{className:nt.a.errorMessage,children:t.error}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{children:"Login"})})]})})),it=Object(L.b)((function(t){return{isAuth:t.Auth.isAuth}}),{login:function(t,e,n){return function(r){A.a.login(t,e,n).then((function(t){if(0===t.data.resultCode)r(K());else if(1===t.data.resultCode){var e=t.data.messages.length>0?t.data.messages[0]:"Some error, ask Administrator";r(Object(B.a)("login",{_error:e}))}}))}}})((function(t){return t.isAuth?Object(g.jsx)(h.a,{to:"/profile"}):Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"LOGIN"}),Object(g.jsx)(rt,{onSubmit:function(e){t.login(e.email,e.password,e.rememberMe)}})]})})),st="SET_INIT",at={initialized:!1},ct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case st:return Object(U.a)(Object(U.a)({},t),{},{initialized:!0});default:return t}return t},ot=n(86),ut=n(23),lt="SHOW-SETTINGS",dt={navItemData:[{link:"/profile",innerHTML:"Profile"},{link:"/messages",innerHTML:"Messages"},{link:"/find_users",innerHTML:"Find Users"},{link:"/news",innerHTML:"News"},{link:"/music",innerHTML:"Music"}],navFriendsData:[{id:1,src:"https://i1.sndcdn.com/artworks-RJG4jIrv6lZwWkQH-cWi6nA-t500x500.jpg"},{id:2,src:"https://i1.sndcdn.com/artworks-RJG4jIrv6lZwWkQH-cWi6nA-t500x500.jpg"},{id:3,src:"https://i1.sndcdn.com/artworks-RJG4jIrv6lZwWkQH-cWi6nA-t500x500.jpg"}],isAuth:void 0},jt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case lt:if(6===t.navItemData.length&&!1===e.isAuth)return t.navItemData.pop(),Object(U.a)(Object(U.a)({},t),{},{navItemData:Object(ut.a)(t.navItemData)});if(5===t.navItemData.length&&!0===e.isAuth)return Object(U.a)(Object(U.a)({},t),{},{navItemData:[].concat(Object(ut.a)(t.navItemData),[{link:"/settings",innerHTML:"Settings"}])});default:return t}return t},ft=i.a.lazy((function(){return n.e(3).then(n.bind(null,304))})),gt=i.a.lazy((function(){return n.e(5).then(n.bind(null,305))})),bt=i.a.lazy((function(){return n.e(4).then(n.bind(null,306))})),ht=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initApp()}},{key:"componentDidUpdate",value:function(t){t.isAuth!==this.props.isAuth&&!0===this.props.isAuth&&this.props.showSettingsIfLogged()}},{key:"render",value:function(){return this.props.initialized?Object(g.jsxs)("div",{className:"wrapper",children:[Object(g.jsx)(q,{}),Object(g.jsx)(b,{navState:this.props.state.sidebar,isAuth:this.props.isAuth,showSettingsIfLogged:this.props.showSettingsIfLogged}),Object(g.jsxs)("div",{className:"wrapper__content",children:[Object(g.jsxs)(r.Suspense,{fallback:Object(g.jsxs)("div",{children:[Object(g.jsx)(ot.a,{})," ...Loading..."]}),children:[Object(g.jsx)(h.b,{path:"/profile/:userID?",render:function(){return Object(g.jsx)(ft,{})}}),Object(g.jsx)(h.b,{path:"/messages",render:function(){return Object(g.jsx)(gt,{})}}),Object(g.jsx)(h.b,{path:"/find_users",render:function(){return Object(g.jsx)(bt,{})}})]}),Object(g.jsx)(h.b,{path:"/login",render:function(){return Object(g.jsx)(it,{})}}),Object(g.jsx)(h.b,{path:"/news",component:_}),Object(g.jsx)(h.b,{path:"/music",component:m}),this.props.isAuth?Object(g.jsx)(h.b,{path:"/settings/:settingsPage?",render:function(){return Object(g.jsx)(E,{})}}):Object(g.jsx)("div",{})]})]}):Object(g.jsx)(ot.a,{})}}]),n}(r.Component),pt=Object(L.b)((function(t){return{initialized:t.App.initialized,isAuth:t.Auth.isAuth,navItemData:t.sidebar.navItemData}}),{setAuthUser:K,initApp:function(){return function(t){var e=t(K());Promise.all([e]).then((function(){t({type:st})}))}},showSettingsIfLogged:function(t){return{type:lt,isAuth:t}}})(ht),Ot=function(t){t&&t instanceof Function&&n.e(6).then(n.bind(null,303)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,s=e.getLCP,a=e.getTTFB;n(t),r(t),i(t),s(t),a(t)}))},mt=n(10),vt=n(93),xt=n(123),_t=n(124),wt=n(135),St=n(128),Tt={settingsPages:[{link:"/profile_settings",innerHTML:"Profile Settings"},{link:"/messages_settings",innerHTML:"Messages Settings"},{link:"/find_users_settings",innerHTML:"Find Users Settings"},{link:"/news_settings",innerHTML:"News Settings"},{link:"/music_settings",innerHTML:"Music Settings"}]},kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,e=arguments.length>1?arguments[1]:void 0;return e.type,t},yt=Object(mt.c)({profilePage:vt.b,dialogsPage:xt.b,sidebar:jt,findUsersPage:_t.a,Auth:Y,form:St.a,App:ct,settingsPage:kt}),It=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||mt.d,At=Object(mt.e)(yt,It(Object(mt.a)(wt.a)));window.__store__=At;var Nt=At,Pt=function(t){a.a.render(Object(g.jsx)(f.a,{children:Object(g.jsx)(L.a,{store:Nt,children:Object(g.jsx)(pt,{state:t,dispatch:Nt.dispatch.bind(Nt),store:Nt})})}),document.getElementById("root"))};Pt(Nt.getState()),Nt.subscribe((function(){var t=Nt.getState();Pt(t)}));e.default=Pt;Ot()},33:function(t,e,n){t.exports={formControl:"FormsControls_formControl__2KcZ9",error:"FormsControls_error__39sYu",errorMessage:"FormsControls_errorMessage__2igW6"}},62:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return d}));var r=n(5),i=n(92),s=n(33),a=n.n(s),c=n(1),o=["input","meta"],u=["input","meta"],l=function(t){var e=t.input,n=t.meta,s=Object(i.a)(t,o),u=n.error&&n.touched;return Object(c.jsxs)("div",{className:a.a.formControl+" "+(u?a.a.error:""),children:[Object(c.jsx)("div",{children:Object(c.jsx)("textarea",Object(r.a)(Object(r.a)({},e),s))}),Object(c.jsx)("div",{children:u?Object(c.jsx)("span",{children:n.error}):Object(c.jsx)("span",{})})]})},d=function(t){var e=t.input,n=t.meta,s=Object(i.a)(t,u),o=(s.type,n.error&&n.touched);return Object(c.jsxs)("div",{className:a.a.formControl+" "+(o?a.a.error:""),children:[Object(c.jsx)("div",{children:Object(c.jsx)("input",Object(r.a)(Object(r.a)({},e),s))}),Object(c.jsx)("div",{children:o?Object(c.jsx)("span",{children:n.error}):Object(c.jsx)("span",{})})]})}},66:function(t,e,n){t.exports={header:"Header_header__14cUw",logo__image:"Header_logo__image__MwDK-",loginBlock:"Header_loginBlock__1SOvx"}},71:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var r=function(t){if(!t)return"Field is required"},i=function(t){return function(e){if(e.length>t)return"Max length is ".concat(t," symbols")}}},86:function(t,e,n){"use strict";var r=n.p+"static/media/bars.0380b7fb.svg",i=(n(0),n(134)),s=n.n(i),a=n(1);e.a=function(t){return Object(a.jsx)("div",{className:s.a.preloader,children:Object(a.jsx)("img",{src:r})})}},93:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return j})),n.d(e,"c",(function(){return f})),n.d(e,"e",(function(){return g}));var r=n(23),i=n(5),s=n(14),a="ADD-POST",c="SET-USER-PROFILE",o="SET-STATUS",u={profileDescription:[{name:"Nuriddin Tashpulatov",bday:"27.01.2000",city:"Tashkent",uni:"ZJNU",site:"pepsi.uz"}],postsData:[{id:1,postText:"yo guyzz",likes:5},{id:2,postText:"wassup",likes:17},{id:3,postText:"imma programer",likes:0},{id:4,postText:"ynwa",likes:6},{id:5,postText:"\u044f \u043b\u044e\u0431\u043b\u044e \u0441\u043e\u0431\u0430\u043a",likes:11}],profile:null,status:""},l=function(t){return{type:a,newPostBody:t}},d=function(t){return{type:o,status:t}},j=function(t){return function(e){s.b.getProfilePage(t).then((function(t){e({type:c,profile:t})}))}},f=function(t){return function(e){s.b.getUserStatus(t).then((function(t){e(d(t.data))}))}},g=function(t){return function(e){s.b.updateStatus(t).then((function(n){0===n.data.resultCode&&e(d(t))}))}};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a:var n=e.newPostBody;return n?Object(i.a)(Object(i.a)({},t),{},{postsData:[].concat(Object(r.a)(t.postsData),[{id:6,postText:n,likes:0}])}):t;case c:return Object(i.a)(Object(i.a)({},t),{},{profile:e.profile});case o:return Object(i.a)(Object(i.a)({},t),{},{status:e.status});default:return t}return t}}},[[291,1,2]]]);
//# sourceMappingURL=main.c6e2d3b9.chunk.js.map